---
title: 一个Java对象到底有多大
date: 2022-06-02 23:03:43
tags: [Java对象]
categories: [Java]
---

一个Integer对象有多大？面试的时候听到这个问题是不是有点懵逼?😳

<!--more-->

# 一个java对象有多大

首先要明确一个java对象由哪几部分组成

# 对象在堆内存的构成

对象在堆内存中的存储布局可以划分为三个部分：对象头（Header）、实例数据（Instance Data）和对齐填充（Padding）

# 一个java对象是由什么组成的

## 对象头

第一类是用于存储对象自身的运行时数据，如哈希码（HashCode）、GC分代年龄、锁状态标志、线程持有的锁、偏向线程ID、偏向时间戳等

第二类是类型指针，即对象指向它的类型元数据的指针，Java虚拟机通过这个指针来确定该对象是哪个类的实例，即对象地址

如果对象是一个数组， 还会有一块4B大小的区域记录4B， 所以数组的最大长度为2^32-1

## 实例数据

实例数据部分是对象真正存储的有效信息，即我们在程序代码里面所定义的各种类型的字段内容，无论是从父类继承下来的，还是在子类中定义的字段都必须记录起来

## 对齐填充

这并不是必然存在的，也没有特别的含义，它仅仅起着占位符的作用。由于HotSp ot虚拟机的自动内存管理系统要求对象起始地址必须是8字节的整数倍，换句话说就是任何对象的大小都必须是8字节的整数倍。对象头部分已经被精心设计成正好是8字节的倍数

![对象组成](对象组成.png)

# 一个Integer 对象有多大

Integer：16B = 内存地址+对象标记+ **private final int value = 16B**

Integer[]：24B = 内存地址+对象标记+ 数组长度+ **private final int value = 20B， 同时内存对齐，所以+4B = 24B**

# 一个ArrayList 对象有多大

ArrayList：24B = 内存地址+对象标记+ 2*4 = 20B + 填充4B = 24B

其中实例数据有以下两个：


**`transient Object[] elementData`**

**`private int size`**